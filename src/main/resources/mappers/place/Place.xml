<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.plateer.fittingroombo.place.mapper">
    <sql id="search">
        AND
        <foreach item="item" collection="type" open="(" close=")" separator="OR">
            <if test="item.name() == 'IP'">
                D.Ip LIKE CONCAT('%', #{ keyword }, '%')
            </if>
            <if test="item.name() == 'COMNAME'">
                D.CompName LIKE CONCAT('%', #{ keyword }, '%')
            </if>
            <if test="item.name() == 'NAME'">
                A.MemberName_kor LIKE CONCAT('%', #{ keyword }, '%')
            </if>
            <if test="item.name() == 'ID'">
                A.MemberID LIKE CONCAT('%', #{ keyword }, '%')
            </if>
            <if test="item.name() == 'SAEAID'">
                A.SAEA_ID LIKE CONCAT('%', #{ keyword }, '%')
            </if>
            <if test="item.name() == 'ALL'">
                A.SAEA_ID LIKE CONCAT('%', #{ keyword }, '%')
                OR  A.MemberID LIKE CONCAT('%', #{ keyword }, '%')
                OR  A.MemberName_kor LIKE CONCAT('%', #{ keyword }, '%')
                OR  D.CompName LIKE CONCAT('%', #{ keyword }, '%')
                OR  D.Ip LIKE CONCAT('%', #{ keyword }, '%')
            </if>
        </foreach>
    </sql>

    <select id="getRoomList" resultType="TradingDTO">
        SELECT
            *
        FROM
            tbl_place_member tpm
        WHERE
            pm_status <> '탈퇴';
    </select>
</mapper>